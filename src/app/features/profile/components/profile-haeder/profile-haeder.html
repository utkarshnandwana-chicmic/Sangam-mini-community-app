<header class="header-wrapper">
  <div class="avatar-col">
    <div class="avatar-ring" [class.premium-ring]="profile.subscriptionPlan">
      <ng-container *ngIf="profile.profilePicture; else placeholder">
        <img class="avatar-image" [src]="profile.profilePicture | imageUrl" alt="Profile picture" />
      </ng-container>

      <ng-template #placeholder>
        <div class="avatar-placeholder">
          <span>{{ profile.name.charAt(0).toUpperCase() }}</span>
        </div>
      </ng-template>
    </div>

    <div class="avatar-actions">
      <ng-container *ngIf="isOwnProfile(); else strangerButtons">
        <button class="btn btn-secondary btn-full" (click)="onEditProfile()">
          Edit Profile
        </button>
      </ng-container>

      <ng-template #strangerButtons>
        <div class="button-group">
          <button class="btn btn-primary">Follow</button>
          <button class="btn btn-secondary">Message</button>
        </div>
      </ng-template>
    </div>

    <div class="wallet-pill left-align" *ngIf="profile.walletBalance >= 0">
      <div class="wallet-icon">üí∞</div>
      <div class="wallet-details">
        <span class="label">Balance</span>
        <span class="value">{{ profile.walletBalance | currency:(profile.subscriptionPlan?.currency || 'USD') }}</span>
      </div>
    </div>
  </div>

  <div class="info-col">
    <div class="top-row">
      <h2 class="username">
        {{ profile.userName.toLowerCase() }}
        <svg *ngIf="profile.subscriptionPlan" class="verify-badge" viewBox="0 0 24 24">
          <path fill="#0095f6" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
      </h2>

      <div class="status-icon" *ngIf="profile.privateAccount" title="Private Account">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="#8e8e8e">
          <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6z"/>
        </svg>
      </div>
    </div>

    <div class="bio-block">
      <div class="name-badge-row">
        <h1 class="real-name">{{ profile.name }}</h1>
        <span class="plan-badge" *ngIf="profile.subscriptionPlan">
          {{ profile.subscriptionPlan.name }}
        </span>
      </div>

      <p class="bio-text" *ngIf="profile.description">{{ profile.description }}</p>

      <div class="links-meta">
        <a *ngIf="profile.link" 
           [href]="profile.link.startsWith('http') ? profile.link : 'https://' + profile.link" 
           target="_blank" class="link-item">
          <span class="icon">üîó</span> {{ profile.link | lowercase }}
        </a>
        <span *ngIf="profile.address" class="meta-item">
          <span class="icon">üìç</span> {{ profile.address }}
        </span>
      </div>

      <div class="footer-meta">
        <span>üìß {{ profile.email }}</span>
        <span>üóì Joined {{ profile.createdAt | date:'MMMM yyyy' }}</span>
      </div>
    </div>
  </div>
</header>